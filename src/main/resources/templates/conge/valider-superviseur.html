<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{fragment/template1}">
<body>
<div layout:fragment="content">
<div class="card">
<h5 class='card-header'>Valider la demande de congé (Superviseur)</h5>
<div class="card-body">
<div class="mb-3">
    <strong>Employé:</strong> <span th:text='${conge.employee.username}'></span>
</div>
<div class="mb-3">
    <strong>Type de congé:</strong> <span th:text='${conge.type_conge != null ? conge.type_conge.libelle : "N/A"}'></span>
</div>
<div class="mb-3">
    <strong>Date début:</strong> <span th:text='${conge.date_debut}'></span>
</div>
<div class="mb-3">
    <strong>Date fin:</strong> <span th:text='${conge.date_fin}'></span>
</div>
<div class="mb-3">
    <strong>Nombre de jours:</strong> <span th:text='${conge.nb_jours}'></span>
</div>
<div class="mb-3">
    <strong>Référence:</strong> <span th:text='${conge.reference_demande}'></span>
</div>

<form th:action='@{/conge/valider-superviseur/{id}(id=${conge.id})}' method='post'>
  <div class='mb-4'>
    <label class='form-label' for='superviseurId'>Superviseur</label>
    <input type='hidden' name='superviseurId' th:value='${conge.superviseur != null ? conge.superviseur.id : (conge.employee != null && conge.employee.superviseur != null ? conge.employee.superviseur.id : "")}'/>
    <input type='text' class='form-control' 
           th:value='${conge.superviseur != null ? conge.superviseur.username : (conge.employee != null && conge.employee.superviseur != null ? conge.employee.superviseur.username : "N/A")}' 
           readonly/>
  </div>
  <div class='mb-4'>
    <label class='form-label' for='statutId'>Statut</label>
    <select class='form-select' name='statutId' required>
      <option value=''>Sélectionner un statut</option>
      <option th:each='statut : ${status_generals}' th:value='${statut.id}' th:text='${statut.name}'></option>
    </select>
  </div>
  <div class='mt-3'>
    <button type='submit' class='btn btn-primary'>Valider</button>
    <a th:href='@{/conge}' class='btn btn-secondary'>Annuler</a>
  </div>
</form>
</div>
</div>
</div>
</body>
</html>

