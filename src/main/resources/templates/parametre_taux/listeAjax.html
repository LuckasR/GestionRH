<table
    class="table table-striped table-hover mb-0 align-middle" th:fragment="parametre_tauxs">
    <thead>
        <tr>
            <th>Code</th>
            <th>Description</th>
            <th>Taux Employé</th>
            <th>Taux Employeur</th>
            <th>Dates</th>
            <th>Statut</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        <tr
            th:if="${parametre_tauxs == null or #lists.isEmpty(parametre_tauxs)}">
            <td colspan="10" style="text-align:center;">Aucun
                paramètre de taux trouvé</td>
        </tr>
        <!-- CHECK: List not empty AND First Element Min is NULL -->
        <tr th:each='row : ${parametre_tauxs}'
            th:if="${not #lists.isEmpty(row.details) and row.details[0].montant_min == null}">

            <td th:text='${row.code}'
                class="fw-bold"></td>
            <td th:text='${row.description}'></td>

            <!-- GLOBAL RATE DISPLAY -->
            <td><span class="badge bg-primary text-white"
                    style="font-size:1em;"
                    th:text="${row.details[0].taux.taux_employe + '%'}"></span></td>
            <td><span class="badge bg-primary text-white"
                    style="font-size:1em;"
                    th:text="${row.details[0].taux.taux_employeur + '%'}"></span></td>

            <td>
                <!-- Matches Entity field: date_application -->
                <div
                    th:text="${row.date_application}"></div>
                <small class="text-muted"
                    th:text="${row.date_fin}"></small>
            </td>

            <td>
                <span th:if="${row.actif}"
                    class="badge bg-success">Actif</span>
                <span th:unless="${row.actif}"
                    class="badge bg-secondary">Inactif</span>
            </td>

            <td>
                <div class="btn-group">
                    <a
                        th:href='@{/parametre_taux/edit/{id}(id=${row.id})}'
                        class="btn btn-sm btn-outline-primary">
                        <i class="fas fa-edit"></i>
                    </a>
                    <a
                        th:href='@{/parametre_taux/delete/{id}(id=${row.id})}'
                        class="btn btn-sm btn-outline-danger"
                        onclick="return confirm('Confirmer la suppression ?')">
                        <i class="fas fa-trash"></i>
                    </a>
                </div>
            </td>
        </tr>
    </tbody>
</table>
