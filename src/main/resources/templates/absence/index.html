<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{fragment/template1}">
    <body>
        <div layout:fragment="content">
            <h2>Liste des employés</h2>
            <div class="inputs" style="display: block;">
                <div class="employe" style="display: flex;">
                    <div class="username"
                        style="display: flex;gap: 20px;width: 100%;">
                        <div class='mb-4'>
                            <label class='form-label'
                                for='Username'>Username</label>
                            <input type='text' style="width: 200%;"
                                class='form-control' id='username'
                                placeholder='username...' name="username">
                        </div>
                    </div>
                </div>
                <div style="display: flex;gap: 200px;">
                    <div class="employe" style="display: flex;">
                        <div class="role"
                            style="display: flex;gap: 20px;width: 200%;">
                            <div class='mb-4'>
                                <label class='form-label'
                                    for='Role'>Role</label>
                                <select class='form-select' name="id_role"
                                    style="width:400%">
                                    <option th:each='item : ${roles}'
                                        th:value='${item.id}'
                                        th:text='${item.name}'></option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="employe" style="display: flex;">
                        <div class="dept"
                            style="display: flex;gap: 20px;width: 100%;">
                            <div class='mb-4'>
                                <label class='form-label'
                                    for='Dept'>Departement</label>
                                <select class='form-select'
                                    name="id_departement" style="width:400%">
                                    <option th:each='item : ${departements}'
                                        th:value='${item.id}'
                                        th:text='${item.name}'></option>
                                </select>
                            </div>
                        </div>
                    </div>

                </div>
                <div class='mt-3'>
                    <button type='submit' id="rechercher"
                        class='btn btn-primary'
                        style="margin-bottom:2%;">Filtrer</button>
                </div>
            </div>
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Role</th>
                        <th>Département</th>
                        <th>username</th>
                        <th>Ajouter Absence</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each='row : ${employees}'>
                        <td th:text='${row.role.name}'></td>
                        <td th:text='${row.departement.name}'></td>
                        <td th:text='${row.username}'></td>
                        <td class="center">
                            <a th:href='@{/employee/edit/{id}(id=${row.id})}' class="btn btn-sm btn-success">Ajouter</a>
                        </td>
                    </tr>
                </tbody>
            </table>

            <h2>Liste de absence</h2>
            <table class="table table-hover">
                <thead><tr>
                        <th>id</th>
                        <th>Employee</th>
                        <th>Date Absence</th>
                        <th>Justifié</th>
                        <th>Commentaire</th>
                        <th>Status </th>
                        <th>Approuvé par l'Admin :</th>
                        <th>Date Création</th>
                        <th>Modification</th>
                        <th>Suppression</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each='row : ${absences}'>
                        <td th:text='${row.id}'></td>
                        <td th:text='${row.employee.username}'></td>
                        <td th:text='${row.date_absence}'></td>
                        <td th:text='${row.commentaire}'></td>
                        <td>
                            <span th:if="${row.status_general.name == 'Approuve'}"
                                class="badge bg-success">Approuvé</span>
                            <span th:if="${row.status_general.name == 'Rejete'}"
                                class="badge bg-danger">Rejeté</span>
                            <span th:if="${row.status_general.name == 'En attente'}"
                                class="badge bg-warning">En attente</span>
                        </td>
                        <td th:text='${row.admin.username}'></td>
                        <td th:text='${row.date_creation}'></td>
                        <td>
                            <a
                                th:href='@{/absence/edit/{id}(id=${row.id})}'>Edit</a>
                        </td>
                        <td>
                            <a
                                th:href='@{/absence/delete/{id}(id=${row.id})}'>Delete</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </body>
</html>